# Copyright 2018, Cristi√°n Donoso.
# This code has a BSD license. See LICENSE.

declare_args() {
  opengl_renderer_enabled = false
  vulkan_renderer_enabled = false
}

config("renderer_common_config") {
  defines = []
  if (vulkan_renderer_enabled) {
    defines += [ "WARHOL_VULKAN_ENABLED" ]
  }

  if (opengl_renderer_enabled) {
    defines += [ "WARHOL_OPENGL_ENABLED" ]
  }
}

source_set("renderer_common") {
  public = [
    "renderer.h",
  ]

  sources = [
    "renderer.cc",
  ]

  deps = [
    "//warhol/graphics/common",
    "//warhol/utils",
  ]

  public_configs = [
    ":renderer_common_config",
  ]
}

source_set("vulkan_renderer") {
  assert(vulkan_renderer_enabled)
  deps = [
    ":renderer_common",
    "//warhol/graphics/vulkan",
  ]
}

source_set("opengl_renderer") {
  assert(opengl_renderer_enabled)
  deps = ]
    ":renderer_common",
    "//warhol/graphics/opengl",
  ]
}
